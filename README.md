# Вариант 14 Практика 2
## Постановка задачи
Разработать инструмент командной строки для визуализации графа зависимостей в git-репозитории. Инструмент должен:

Определять зависимости между коммитами, включая транзитивные зависимости.

Использовать представление графа в формате Mermaid.

Выводить результат в виде сообщения об успешном выполнении и сохранять граф в файле формата PNG.

Учитывать только коммиты, созданные после заданной даты.

Использовать конфигурационный файл в формате YAML для настройки путей и параметров.

Покрыть все функции инструмента тестами.

## Описание проекта
Проект представляет собой инструмент командной строки, который анализирует git-репозиторий и строит граф зависимостей между коммитами. Граф сохраняется в виде изображения в формате PNG. Инструмент использует библиотеку graphviz для визуализации графа и YAML-файл для настройки параметров.

### Основные функции проекта:

Загрузка конфигурации: Чтение параметров из YAML-файла, включая путь к репозиторию, дату для фильтрации коммитов и путь для сохранения изображения.

Получение коммитов: Извлечение списка коммитов из git-репозитория, которые были созданы после указанной даты.

Построение графа: Создание графа зависимостей между коммитами с использованием библиотеки graphviz.

Сохранение графа: Генерация изображения графа в формате PNG и сохранение его по указанному пути.

## Описание классов
Проект состоит из двух основных файлов: 1.py (основной код) и tests.py (тесты).

### Файл 1.py
1) Функция load_config(config_path):

Загружает конфигурацию из YAML-файла.

Возвращает словарь с параметрами, такими как путь к репозиторию, дата коммитов и путь для сохранения изображения.

2) Функция get_commits(repo_path, after_date):

Извлекает список коммитов из git-репозитория, которые были созданы после указанной даты.

Использует команду git log для получения хешей коммитов и их дат.

3) Функция build_graph(commits):

Создает граф зависимостей между коммитами с использованием библиотеки graphviz.

Каждый коммит представляется узлом графа.

Логика для добавления зависимостей между коммитами (например, родительские коммиты) может быть расширена в будущем.

4) Функция save_graph(dot, output_path):

Сохраняет граф в виде изображения в формате PNG по указанному пути.

5) Функция main():

Главная функция, которая выполняет последовательность действий: загружает конфигурацию, получает коммиты, строит граф и сохраняет его.
## 
### Файл tests.py
Класс TestDependencyVisualizer:

Содержит тесты для проверки функциональности проекта.

Использует библиотеку unittest и моки (unittest.mock) для имитации внешних зависимостей (например, вызова git log или работы с файлами).

Тесты:

test_load_config: Проверяет корректность загрузки конфигурации из YAML-файла.

test_get_commits: Проверяет, что функция get_commits возвращает только коммиты, созданные после указанной даты.

test_build_graph: Проверяет, что функция build_graph корректно создает узлы графа для каждого коммита.

test_save_graph: Проверяет, что функция save_graph корректно сохраняет граф в файл.

## Описание тестирования
Тестирование проекта выполняется с использованием модуля unittest и библиотеки unittest.mock. Основные цели тестов:

Проверка корректности загрузки конфигурации: Убедиться, что YAML-файл правильно парсится и возвращает ожидаемые параметры.

Проверка получения коммитов: Убедиться, что функция get_commits возвращает только коммиты, созданные после указанной даты.

Проверка построения графа: Убедиться, что каждый коммит добавляется в граф как узел.

Проверка сохранения графа: Убедиться, что граф корректно сохраняется в файл в формате PNG.

Тесты используют моки для имитации внешних зависимостей, таких как вызов git log или работа с файлами, чтобы изолировать функциональность и убедиться в её корректной работе.

![image](https://github.com/user-attachments/assets/0ac836de-30cd-45a7-bbf5-45852cc461ee)



